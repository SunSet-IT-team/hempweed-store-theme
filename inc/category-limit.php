<?php
/**
 * ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ² ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑÑ…
 */

if ( ! defined( 'ABSPATH' ) ) {
    exit;
}

/**
 * ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ² Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ñ‹Ñ… ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑÑ…
 */
add_action('pre_get_posts', function ($query) {
    // Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ° Ğ²Ğ¸Ñ‚Ñ€Ğ¸Ğ½Ğµ (Ğ½Ğµ Ğ² Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºĞµ) Ğ¸ Ğ² Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞµ WooCommerce
    if (is_admin() || !$query->is_main_query() || !is_tax('product_cat')) {
        return;
    }

    // ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ñ… ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑÑ…
    $limited_categories = ['semena', 'masla']; // ğŸ”¹ ÑƒĞºĞ°Ğ¶Ğ¸ Ğ·Ğ´ĞµÑÑŒ ÑĞ»Ğ°Ğ³Ğ¸ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹
    $current_category   = get_queried_object();

    if ($current_category && in_array($current_category->slug, $limited_categories, true)) {
        $query->set('posts_per_page', 12); // ğŸ”¹ ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑŒ
    }
});
